<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Grievance Redressal System - Admin Portal</title>
    <link rel="stylesheet" href="adminportalcss.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Login Section -->
        <div id="login-section" class="login-container">
            <div class="login-card">
                <div class="login-header">
                    <h1><i class="fas fa-lock"></i> Admin Login</h1>
                    <p>Grievance Redressal System</p>
                </div>
                <div class="login-form">
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" placeholder="Enter your username">
                    </div>
                    <div class="form-group">
                        <label for="password">Password</label>
                        <input type="password" id="password" placeholder="Enter your password">
                    </div>
                    <button id="login-btn" class="btn primary">Login</button>
                    <div id="login-error" class="error-message" style="display: none;">
                        Invalid username or password. Please try again.
                    </div>
                </div>
            </div>
        </div>

        <!-- Dashboard Section -->
        <div id="dashboard-section" style="display: none;">
            <header class="admin-header">
                <div class="logo">
                    <h1><i class="fas fa-comment-dots"></i> Grievance Redressal System</h1>
                </div>
                <div class="user-info">
                    <span id="admin-name">Admin</span>
                    <button id="logout-btn" class="btn logout"><i class="fas fa-sign-out-alt"></i> Logout</button>
                </div>
            </header>

            <div class="dashboard-container">
                <aside class="sidebar">
                    <nav>
                        <ul>
                            <li class="active" data-section="complaints">
                                <i class="fas fa-clipboard-list"></i> Complaints
                            </li>
                            <li data-section="departments">
                                <i class="fas fa-building"></i> Departments
                            </li>
                            <li data-section="reports">
                                <i class="fas fa-chart-bar"></i> Reports
                            </li>
                        </ul>
                    </nav>
                </aside>

                <main class="main-content">
                    <!-- Complaints Section -->
                    <section id="complaints-section" class="dashboard-section active">
                        <div class="section-header">
                            <h2>Manage Complaints</h2>
                            <div class="filters">
                                <div class="filter-group">
                                    <label for="filter-department">Department:</label>
                                    <select id="filter-department">
                                        <option value="">All Departments</option>
                                        <option value="1">Administration</option>
                                        <option value="2">Electrical</option>
                                        <option value="3">HR</option>
                                        <option value="4">Road & Transport</option>
                                        <option value="5">Finance</option>
                                        <option value="6">Maintenance</option>
                                        <option value="7">Water Supply Department</option>
                                        <option value="8">Health & Sanitation</option>
                                        <option value="9">Education</option>
                                        <option value="10">Public Safety</option>
                                        <option value="11">Civil</option>
                                        <option value="12">Waste Management</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <label for="filter-status">Status:</label>
                                    <select id="filter-status">
                                        <option value="">All Statuses</option>
                                        <option value="Pending">Pending</option>
                                        <option value="In Progress">In Progress</option>
                                        <option value="Resolved">Resolved</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <input type="text" id="search-ticket" placeholder="Search by ticket...">
                                    <button id="search-btn" class="btn secondary"><i class="fas fa-search"></i></button>
                                </div>
                            </div>
                        </div>

                        <div class="complaints-table-container">
                            <table class="complaints-table">
                                <thead>
                                    <tr>
                                        <th>Ticket</th>
                                        <th>Department</th>
                                        <th>Submitted By</th>
                                        <th>Date</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="complaints-list">
                                    <!-- Will be populated dynamically -->
                                    
                                </tbody>
                            </table>
                            <div id="no-complaints" class="no-data" style="display: none;">
                                <i class="fas fa-inbox"></i>
                                <p>No complaints found</p>
                            </div>
                        </div>
                    </section>

                    <!-- Departments Section -->
                    <section id="departments-section" class="dashboard-section">
                        <div class="section-header">
                            <h2>Departments</h2>
                        </div>
                        <div class="departments-container">
                            <div class="departments-grid" id="departments-grid">
                                <!-- Departments will be populated dynamically -->
                            </div>
                        </div>
                    </section>

                    <!-- Reports Section -->
                    <section id="reports-section" class="dashboard-section">
                        <div class="section-header">
                            <h2>Reports & Analytics</h2>
                        </div>
                        <div class="reports-container">
                            <div class="stats-row">
                                <div class="stat-card">
                                    <div class="stat-icon"><i class="fas fa-clipboard-list"></i></div>
                                    <div class="stat-data">
                                        <h3>Total Complaints</h3>
                                        <p id="stat-total">0</p>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon pending"><i class="fas fa-clock"></i></div>
                                    <div class="stat-data">
                                        <h3>Pending</h3>
                                        <p id="stat-pending">0</p>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon progress"><i class="fas fa-spinner"></i></div>
                                    <div class="stat-data">
                                        <h3>In Progress</h3>
                                        <p id="stat-progress">0</p>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon resolved"><i class="fas fa-check-circle"></i></div>
                                    <div class="stat-data">
                                        <h3>Resolved</h3>
                                        <p id="stat-resolved">0</p>
                                    </div>
                                </div>
                            </div>
                            <div class="chart-containers">
                                <div class="chart-card">
                                    <h3>Complaints by Department</h3>
                                    <div class="chart" id="dept-chart">
                                        <!-- Canvas for chart will be added via JS -->
                                    </div>
                                </div>
                                <div class="chart-card">
                                    <h3>Complaints Status</h3>
                                    <div class="chart" id="status-chart">
                                        <!-- Canvas for chart will be added via JS -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </main>
            </div>
        </div>

        <!-- Complaint Detail Modal -->
        <div id="complaint-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Complaint Details</h2>
                    <span class="close">&times;</span>
                </div>
                <div class="modal-body">
                    <div class="complaint-header">
                        <span class="ticket-number" id="modal-ticket"></span>
                        <span class="complaint-status" id="modal-status"></span>
                    </div>
                    <div class="complaint-info">
                        <div class="info-row">
                            <div class="info-group">
                                <label>Submitted By:</label>
                                <p id="modal-user"></p>
                            </div>
                            <div class="info-group">
                                <label>Email:</label>
                                <p id="modal-email"></p>
                            </div>
                        </div>
                        <div class="info-row">
                            <div class="info-group">
                                <label>Department:</label>
                                <p id="modal-department"></p>
                            </div>
                            <div class="info-group">
                                <label>Date Submitted:</label>
                                <p id="modal-date"></p>
                            </div>
                        </div>
                    </div>
                    <div class="complaint-description">
                        <label>Description:</label>
                        <p id="modal-description"></p>
                    </div>
                    <div id="modal-image-container" class="complaint-image" style="display: none;">
                        <label>Attached Image:</label>
                        <div class="image-view">
                            <img id="modal-image" src="" alt="Complaint Image">
                        </div>
                    </div>
                    <div class="update-status">
                        <label>Update Status:</label>
                        <div class="status-options">
                            <select id="update-status-select">
                                <option value="Pending">Pending</option>
                                <option value="In Progress">In Progress</option>
                                <option value="Resolved">Resolved</option>
                            </select>
                            <button id="update-status-btn" class="btn primary">Update Status</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Include Chart.js for reports -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <script src="adminportaljs.js"></script>
</body>
</html>